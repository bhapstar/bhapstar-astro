<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Print Enquiries — Bhapstar Astrophotography</title>
  <meta name="description" content="Enquire about astrophotography prints — A3/A4 prints, framed or unframed, digital downloads, and custom calendars by Bhapinder Singh." />

  <!-- Open Graph -->
  <meta property="og:title"       content="Print Enquiries — Bhapstar Astrophotography" />
  <meta property="og:description" content="Order astrophotography prints — A3/A4, framed or unframed, digital downloads and custom calendars." />
  <meta property="og:image"       content="images/RN.jpg" />

  <!-- Cloudflare Web Analytics -->
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token":"b3353c7dd8764a64baee57fd09c3dbb9"}'></script>

  <link rel="stylesheet" href="styles.css" />
</head>
<body class="page-prints">

<!-- ── Header (injected by partials.js) ── -->
<div id="siteHeader"></div>

<!-- Support panel -->
<section class="section support-wrap">
  <div class="wrap">
    <div class="panel support-panel">
      <div class="support-left">
        <h2 class="support-title">Support my work</h2>
        <p class="support-text">
          If you enjoy my astrophotography or the outreach work I do, you're welcome
          to support the time and effort behind it by clicking the button here.
        </p>
      </div>
      <div class="support-right">
        <a
          href="https://www.buymeacoffee.com/bhapstar_astro"
          target="_blank"
          rel="noopener noreferrer"
          class="btn primary support-btn"
        >☕ Support my work</a>
      </div>
    </div>
  </div>
</section>

<main>
  <section class="section">
    <div class="wrap">

      <div class="section-head featured-head">
        <h2>Print enquiries</h2>
      </div>

      <div class="prints-layout">

        <!-- LEFT: How it works + enquiry form + framed mockup -->
        <div class="prints-main">

          <!-- 1) How it works -->
          <div class="panel prints-panel">
            <h3>How it works</h3>
            <div class="steps">
              <div class="step">
                <div class="k">1</div>
                <h4>Choose an image</h4>
                <p>Pick from the <a href="gallery.html">gallery</a>, then select the image title in the enquiry builder.</p>
              </div>
              <div class="step">
                <div class="k">2</div>
                <h4>Select a format</h4>
                <p>A4 / A3 print, framed or unframed, or a high-resolution digital file.</p>
                <p class="helper">Repeat steps 1 and 2 as many times as needed.</p>
              </div>
              <div class="step">
                <div class="k">3</div>
                <h4>Send an enquiry</h4>
                <p>I'll confirm availability, finish options, lead time, and delivery based on your location.</p>
              </div>
            </div>
          </div>

          <!-- 2) Enquiry builder -->
          <div class="panel prints-panel">
            <h3>Build your enquiry</h3>
            <p class="helper">Fill this in and submit. I'll get back to you as soon as possible.</p>

            <form id="printsEnquiryForm" action="https://formspree.io/f/xykwwgvr" method="POST" novalidate>
              <input type="hidden" name="_subject" value="bhapstar — New print enquiry" />
              <!-- Honeypot -->
              <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off" />

              <div class="picker" id="enquiryPicker">

                <div class="row">
                  <label for="pName">Name</label>
                  <input id="pName" name="name" type="text" placeholder="Your name" required autocomplete="name" />
                </div>

                <div class="row">
                  <label for="pPhone">Phone</label>
                  <input id="pPhone" name="phone" type="tel" placeholder="Your phone number" required autocomplete="tel" />
                </div>

                <div class="row">
                  <label for="pEmail">Email</label>
                  <input id="pEmail" name="email" type="email" placeholder="Your email address" required autocomplete="email" />
                </div>

                <div class="row row-start">
                  <label>Items</label>
                  <div>
                    <div id="itemsWrap" class="items-area"></div>
                    <div class="items-controls">
                      <button type="button" class="btn" id="addItemBtn">+ Add another image</button>
                    </div>
                    <input type="hidden" id="itemsSummary" name="items_summary" value="" />
                  </div>
                </div>

                <div class="row">
                  <label for="pCity">Location</label>
                  <input id="pCity" name="delivery_location" type="text" placeholder="Delivery location" autocomplete="address-level2" />
                </div>

                <div class="row">
                  <label for="pNotes">Notes</label>
                  <textarea id="pNotes" name="notes" placeholder="Any further information about your enquiry" rows="3"></textarea>
                </div>

                <!-- Calendar interest -->
                <div class="row row-start">
                  <label for="pCalendar">Calendar</label>
                  <div>
                    <label class="checkline" for="pCalendar">
                      <input id="pCalendar" name="calendar_interest" type="checkbox" value="Yes" />
                      <span>
                        Please click here if you would also like to enquire about a custom
                        astrophotography calendar made from any 12 of my images of your choosing.
                        <a href="#" class="faq-link" id="openCalendarExample">View example</a>
                      </span>
                    </label>
                  </div>
                </div>

              </div>

              <div class="spacer-12" aria-hidden="true"></div>

              <div class="template-box">
                <pre id="enquiryPreview" aria-label="Enquiry preview"></pre>
              </div>

              <div class="spacer-14" aria-hidden="true"></div>

              <div class="actions actions-left">
                <button class="btn primary" id="submitEnquiry" type="submit">Submit enquiry</button>
              </div>

              <p class="helper mt-10">
                Enquiry-based only — no checkout or online payments on this site.
              </p>
            </form>
          </div>

          <!-- 3) Framed mockup -->
          <div class="panel prints-panel">
            <h3>Framed mockup</h3>
            <p class="helper">A rotating preview of framed print styles.</p>
            <div class="grid grid-single framed-grid">
              <div class="card framed-tile" aria-hidden="false">
                <img id="framedPreviewImg" src="" alt="Framed print preview" loading="lazy" />
                <div class="cap"><div class="t">Framed mockup</div></div>
              </div>
            </div>

            <script id="framedData" type="application/json">
            [
              "images/framed/1.jpg",   "images/framed/2.jpg",
              "images/framed/3.jpg",   "images/framed/4.jpg",
              "images/framed/5.jpg",   "images/framed/1-1.jpg",
              "images/framed/2-2.jpg", "images/framed/3-3.jpg",
              "images/framed/4-4.jpg", "images/framed/5-5.jpg"
            ]
            </script>
          </div>

        </div>

        <!-- RIGHT: FAQ -->
        <aside class="prints-side" aria-label="Print FAQ">
          <div class="panel prints-panel">
            <h3>FAQ</h3>
            <div class="faq">

              <details class="faq-item">
                <summary>What print sizes are available?</summary>
                <p>Prints are available in A3 or A4 sizes.</p>
              </details>

              <details class="faq-item">
                <summary>What paper is used for printing?</summary>
                <p>Premium glossy 200gsm photo-quality paper with an advanced waterproof coating — keeping prints clean, sharp and protected from moisture and fingerprints over time.</p>
              </details>

              <details class="faq-item">
                <summary>Can I have my print framed?</summary>
                <p>Yes, a high quality black frame can be supplied. Other frame colours are available by request.</p>
              </details>

              <details class="faq-item">
                <summary>How will the prints be shipped?</summary>
                <p>Unframed prints will be sent in a secure rolled mailing tube. Framed prints will be boxed with corner protectors.</p>
              </details>

              <details class="faq-item">
                <summary>How does the digital download work?</summary>
                <p>The high-resolution digital file will be emailed to you directly.</p>
              </details>

              <details class="faq-item">
                <summary>Do you ship internationally?</summary>
                <p>It depends on destination and courier options. Tell me your location in the enquiry and I'll confirm what's possible.</p>
              </details>

              <details class="faq-item">
                <summary>Can I request a specific crop or aspect ratio?</summary>
                <p>Yes — in many cases I can prepare a crop that suits your chosen size. Mention it in the notes.</p>
              </details>

              <details class="faq-item" id="faq-calendar">
                <summary>What will the calendar look like?</summary>
                <p>The calendar will include 12 images from the gallery (chosen at random or by your choice), each with a short description. It will also be pre-populated with key astronomical events and dates.</p>
                <p class="helper mt-10">Example layout:</p>
                <img src="images/calendar-example.jpg" alt="Example calendar layout" class="calendar-example-img" loading="lazy" />
              </details>

              <details class="faq-item">
                <summary>Is there anything else I should know?</summary>
                <p>Due to differences in monitor/screen rendering, the print or download you receive may differ slightly from what you see here. All prints and downloads contain an imperceptible watermark.</p>
              </details>

            </div>
          </div>
        </aside>

      </div>

    </div>
  </section>
</main>

<!-- ── Footer (injected by partials.js) ── -->
<div id="siteFooter"></div>

<!-- Toast -->
<div class="toast" id="toast" role="status" aria-live="polite"></div>

<!-- Calendar example modal -->
<div class="calendar-modal" id="calendarModal" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Calendar example">
  <div class="calendar-modal-inner">
    <button class="calendar-close" aria-label="Close">&times;</button>
    <img src="images/calendar-example.jpg" alt="Example astrophotography calendar layout" loading="lazy" />
  </div>
</div>


<!-- ─────────────────────────────────────────
     PRINT ENQUIRY BUILDER
───────────────────────────────────────── -->
<script>
(function () {
  const $ = id => document.getElementById(id);
  const form        = $('printsEnquiryForm');
  const itemsWrap   = $('itemsWrap');
  const addItemBtn  = $('addItemBtn');
  const itemsSummary = $('itemsSummary');
  const pCity       = $('pCity');
  const pName       = $('pName');
  const pPhone      = $('pPhone');
  const pEmail      = $('pEmail');
  const pNotes      = $('pNotes');
  const pCalendar   = $('pCalendar');
  const preview     = $('enquiryPreview');
  const toast       = $('toast');

  const TYPE_OPTIONS = [
    { v: 'A4',     t: 'A4' },
    { v: 'A3',     t: 'A3' },
    { v: 'Digital', t: 'Digital (high-res)' },
  ];
  const FRAMED_OPTIONS = [
    { v: 'No',  t: 'No' },
    { v: 'Yes', t: 'Yes' },
  ];

  let GALLERY_TITLES = [];

  function showToast(msg) {
    if (!toast) return;
    toast.textContent = msg;
    toast.classList.add('show');
    clearTimeout(showToast._t);
    showToast._t = setTimeout(() => toast.classList.remove('show'), 3200);
  }

  async function loadGalleryTitles() {
    try {
      const res = await fetch('gallery-data.json', { cache: 'no-store' });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      const items = await res.json();
      GALLERY_TITLES = Array.from(new Set(
        items.filter(x => x?.title && !x.videos).map(x => x.title).filter(Boolean)
      ));
    } catch (err) {
      console.error(err);
      GALLERY_TITLES = [];
    }
  }

  function makeSelect(options, placeholder) {
    const s = document.createElement('select');
    const ph = document.createElement('option');
    ph.value = ''; ph.textContent = placeholder;
    s.appendChild(ph);
    options.forEach(o => {
      const opt = document.createElement('option');
      opt.value = o.v ?? o; opt.textContent = o.t ?? o;
      s.appendChild(opt);
    });
    return s;
  }

  function addItem(prefill) {
    if (!itemsWrap) return;
    const row = document.createElement('div');
    row.className = 'item-row';

    const imgSel = makeSelect(GALLERY_TITLES.map(t => ({ v: t, t })),
      GALLERY_TITLES.length ? 'Select an image' : 'Gallery unavailable');
    imgSel.name = 'item_image[]'; imgSel.required = true;
    if (!GALLERY_TITLES.length) imgSel.disabled = true;

    const typeSel   = makeSelect(TYPE_OPTIONS,   'Image size / type');
    typeSel.name    = 'item_type[]';
    const frameSel  = makeSelect(FRAMED_OPTIONS, 'Frame required?');
    frameSel.name   = 'item_framed[]';

    imgSel.value   = prefill?.image  ?? '';
    typeSel.value  = prefill?.type   ?? '';
    frameSel.value = prefill?.framed ?? '';

    function syncFrameLock() {
      const isDigital = typeSel.value === 'Digital';
      frameSel.value    = isDigital ? 'No' : frameSel.value;
      frameSel.disabled = isDigital;
    }
    syncFrameLock();
    typeSel.addEventListener('change', () => { syncFrameLock(); build(); });

    const actions   = document.createElement('div');
    actions.className = 'item-actions';
    const removeBtn = document.createElement('button');
    removeBtn.type  = 'button';
    removeBtn.className = 'btn';
    removeBtn.textContent = 'Remove';
    removeBtn.addEventListener('click', () => {
      row.remove();
      if (!itemsWrap.querySelectorAll('.item-row').length) addItem();
      build();
    });
    actions.appendChild(removeBtn);

    imgSel.addEventListener('change', build);
    frameSel.addEventListener('change', build);

    row.append(imgSel, typeSel, frameSel, actions);
    itemsWrap.appendChild(row);
    build();
  }

  function getItems() {
    return Array.from(itemsWrap?.querySelectorAll('.item-row') || []).map(r => {
      const s = r.querySelectorAll('select');
      return { image: s[0]?.value || '', type: s[1]?.value || '', framed: s[2]?.value || '' };
    });
  }

  function build() {
    const items = getItems();
    const lines = [
      `Name: ${pName?.value?.trim() || ''}`,
      `Phone: ${pPhone?.value?.trim() || ''}`,
      `Email: ${pEmail?.value?.trim() || ''}`,
      '',
      'Items:',
    ];

    if (!items.length) {
      lines.push('- (none)');
    } else {
      items.forEach((it, i) => {
        const f = it.type === 'Digital' ? 'No' : (it.framed || '');
        lines.push(`${i + 1}) ${it.image || '(select image)'} — ${it.type || ''} — Frame: ${f}`);
      });
    }

    lines.push('', `Calendar interest: ${pCalendar?.checked ? 'Yes (custom calendar – 12 images)' : 'No'}`);
    lines.push('', `Location: ${pCity?.value?.trim() || ''}`, `Notes: ${pNotes?.value?.trim() || ''}`);

    if (preview) preview.textContent = lines.join('\n');
    if (itemsSummary) {
      itemsSummary.value = items.map((it, i) => {
        const f = it.type === 'Digital' ? 'No' : (it.framed || '');
        return `${i + 1}) ${it.image} — ${it.type} — Frame: ${f}`;
      }).join('\n');
    }
  }

  [pCity, pName, pPhone, pEmail, pNotes].forEach(x => x?.addEventListener('input', build));
  pCalendar?.addEventListener('change', build);
  addItemBtn?.addEventListener('click', () => addItem());

  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const items = getItems();
      if (!items.length || !items.some(it => it.image.trim())) {
        showToast('Please add at least one image to your enquiry.');
        return;
      }
      if (!form.checkValidity()) { form.reportValidity(); return; }

      const btn = form.querySelector('#submitEnquiry');
      const originalText = btn.textContent;
      btn.textContent = 'Sending…'; btn.disabled = true;

      build();
      try {
        const res = await fetch(form.action, {
          method: 'POST',
          headers: { 'Accept': 'application/json' },
          body: new FormData(form),
        });
        if (!res.ok) throw new Error('Bad response');
        form.reset();
        itemsWrap.innerHTML = '';
        addItem();
        build();
        showToast('Thank you — your enquiry has been submitted. I\'ll be in touch as soon as possible.');
      } catch {
        showToast('Thank you — your enquiry has been submitted. I\'ll be in touch as soon as possible.');
      } finally {
        btn.textContent = originalText; btn.disabled = false;
      }
    });
  }

  (async function init() {
    await loadGalleryTitles();
    if (itemsWrap) itemsWrap.innerHTML = '';
    addItem();
    build();
  })();
})();
</script>


<!-- ─────────────────────────────────────────
     FRAMED MOCKUP ROTATOR
───────────────────────────────────────── -->
<script>
(function () {
  const img    = document.getElementById('framedPreviewImg');
  const dataEl = document.getElementById('framedData');
  if (!img || !dataEl) return;

  let list = [];
  try { list = JSON.parse(dataEl.textContent).filter(Boolean); }
  catch { return; }
  if (!list.length) { img.style.display = 'none'; return; }

  let i = Math.floor(Math.random() * list.length);

  function show(idx) { img.src = list[idx]; }

  img.addEventListener('error', () => { i = (i + 1) % list.length; show(i); });

  show(i);
  setInterval(() => { i = (i + 1) % list.length; show(i); }, 5000);
})();
</script>


<!-- ─────────────────────────────────────────
     CALENDAR MODAL
───────────────────────────────────────── -->
<script>
(function () {
  const openBtn  = document.getElementById('openCalendarExample');
  const modal    = document.getElementById('calendarModal');
  const closeBtn = modal?.querySelector('.calendar-close');
  if (!openBtn || !modal) return;

  function open()  { modal.classList.add('open');    modal.setAttribute('aria-hidden', 'false'); closeBtn?.focus(); }
  function close() { modal.classList.remove('open'); modal.setAttribute('aria-hidden', 'true'); openBtn.focus(); }

  openBtn.addEventListener('click', (e) => { e.preventDefault(); open(); });
  closeBtn?.addEventListener('click', close);
  modal.addEventListener('click', (e) => { if (e.target === modal) close(); });
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') close(); });
})();
</script>

<script src="protect-images.js"></script>
<script src="partials/partials.js"></script>

</body>
</html>
